---
output: html_document 
resource_files:
- allData.rdata
- selTab.csv
- boxplots.r
- plots.r
- violins.r
runtime: shiny
---
```{r echo=FALSE,message=FALSE,warning=FALSE}
library(knitr)
library(lubridate);library(shiny)
library(data.table)
library(ggplot2)
library(dplyr)
library(curl)
library(gridExtra)
library(leaflet);library(leaflet.extras)

load("~/Dropbox/sensing_mission/data_vdl/processedData/allData.rdata")
# load("C:/Users/minunno/Documents/data_vdl/processedData/allData.rdata")

allData$dSM <- NA
selTab <- fread("~/Dropbox/sensing_mission/data_vdl/processedData/selTab.csv")
# selTab <- fread("C:/Users/minunno/Documents/data_vdl/processedData/selTab.csv")

load("~/Dropbox/sensing_mission/data_vdl/processedData/vdlMap.rdata")
# load("C:/Users/minunno/Documents/data_vdl/processedData/vdlMap.rdata")
vdlMap <- map2018 #choose between map2015 and map2018

read_chunk('plots.r')
read_chunk('violins.r')
read_chunk('boxplots.r')
```

---
title: "Soil Sensor Data Visualisation"
author: "by Walt Ludwick and Francesco Checcomi"
date: "January 11, 2019"
output: html_document
runtime: shiny
---

This is a Single-Page Application -[a.k.a. SPA](https://en.wikipedia.org/wiki/Single-page_application)- that offers an interactive view of data generated by soil sensors deployed around the farm ["Quinta Vale da Lama"](https://www.valedalama.net).  Embedded in the page below are 3 interactive applets: the first two are designed to give an idea of data distribution and density, while the third offers a fine-grained comparative view of data from specific sensors, as filtered and selected by the user.

## How to use the applets

Usability of these apps is pretty intuitive, if somewhat traditional: use the controls embedded in grey box on LH side of window to set your parameters, and results are displayed in the graph just to the right.  Scroll up-and-down the controls/ results window in the vertical scroll bar to right of results pane, and up and down the window via scroll bar to the right of that.  Note: the first two (data distribution) applets are set by default to visualise data from all sensors -change this selection at your option- while the last applet requires that you make some selection, before it will visualise any data.

## Embedded applet: Boxplot

The classic view of data distribution, divided into quartiles.  The line in middle of boxplot represents medium, and the "whisker" lines at top and bottom extend to max and min values, respectively.

<!-- # create boxplots -->
```{r third,echo=FALSE,message=FALSE,warning=FALSE}
<<boxplots>>
```

## Embedded applet:  Violin Plot

Allows you to view distribution of data selected, much like the boxplot above, only with the added nuance of kernel density, or frequency of datapoints as they are distributed up and down the scale of values selected.

## creates violin plots
```{r second,echo=FALSE,message=FALSE,warning=FALSE}
<<violin>>
```

## Embedded applet: Line Graph Plot

This applet enables us to plot data from individual soil sensors, according to parameters set by the user, for:

* X and Y axes: Can set your choice of parameters measured by the soil sensor (including date/time stamp of readings)
* Timestep (set increment) and Start/End dates (set the range)
* Classification: Filter by functional class(es) and/or zone class(es) you'd like to see displayed.


<!-- # creates plots -->
```{r first,echo=FALSE,message=FALSE,warning=FALSE}
<<plots>>
```

## About the technology

This R Markdown document is made interactive using Shiny. Unlike the more traditional workflow of creating static reports, you can now create documents that allow your readers to change the assumptions underlying your analysis and see the results immediately. To learn more, see Interactive Documents.

You can embed Shiny inputs and outputs in your document. Outputs are automatically updated whenever inputs change. This demonstrates how a standard R plot can be made interactive by wrapping it in the Shiny renderPlot function. The selectInput and sliderInput functions create the input widgets used to drive the plot.

Itâ€™s also possible to embed an entire Shiny application within an R Markdown document using the shinyAppDir function -as per the examples above.
